*** Settings ***
Documentation     Ckeckout Page Check
Suite Setup       New Test Suite Browser And Login    ${defaultUser}    ${defaultPassword}    ${defaultDomain}
Suite Teardown    #Close Test Suite Browser    # close the browser opened for this test suite
Test Setup        Setup Test Case
Test Teardown     Teardown Test Case
Resource          ../../../resources/kw_login.robot    # import login keyword
Resource          ../../../resources/kw_browser.robot    # import ajax listener keyword
Resource          ../../../resources/var_tax_price.robot

*** Test Cases ***
checkout_addcard_check
    #C端将商品加入购入车再点击checkout 显示购买的商品，地址，买家留言，商品总价及提交按钮
    #.click products btn
    Wait Until Element Is Visible    ${add_products_btn}
    Click Element    ${add_products_btn}
    #点击商品预览
    Sleep    3
    #获取第一个商品名称
    Assign id To Element    dom:document.querySelectorAll(".product_name___Ul4W-")[0]    title
    Wait Until Element Is Visible    title
    ${title}    Get Text    title
    #点击商品预览
    Assign id To Element    dom:document.querySelectorAll(".preview___37DtU")[0]    btn1
    Wait Until Element Is Visible    btn1
    Click Element    btn1
    #.第二个窗口
    #${url}    Set Variable    http://diu.preview.shoplazza.com/products/example-t-shirt-18
    Select Window    New
    Wait Until Element Is Visible    dom:document.querySelectorAll(".submit_mb span")[0]
    Page Should Contain Image    dom:document.querySelectorAll("img")[0]
    Page Should Contain Element    dom:document.querySelectorAll(".sales_price")[0]

checkout_bynow_check
    #.进入checkout界面 显示购买的商品，地址，
    Wait Until Element Is Visible    ${add_products_btn}
    Click Element    ${add_products_btn}
    #点击商品预览
    Sleep    3
    #获取第一个商品名称
    Assign id To Element    dom:document.querySelectorAll(".product_name___Ul4W-")[0]    title
    Wait Until Element Is Visible    title
    ${title}    Get Text    title
    #点击商品预览
    Assign id To Element    dom:document.querySelectorAll(".preview___37DtU")[0]    btn1
    Wait Until Element Is Visible    btn1
    Click Element    btn1
    #.第二个窗口
    #${url}    Set Variable    http://diu.preview.shoplazza.com/products/example-t-shirt-18
    Select Window    New
    Wait Until Element Is Visible    dom:document.querySelectorAll(".submit_mb span")[0]
    Click Element    //*[@id="shoplaza-section-1523699573925"]/div/div[4]/div[2]/a[5]/i
    Wait Until Element Is Visible    class:account_container
    Page Should Not COntain Element    class:buy-now
